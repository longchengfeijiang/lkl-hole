
  <view class="page">
    <!-- blog content -->
    <view class="blog"  wx:if="{{ !loading }}">
      <!-- User Info -->
      <view class="blog-user">
        <view class="blog-user-avatar">
          <image class="avatar" src="{{ blog.user.avatar === '../../assert/avatar.png' ? '../assets/svgs/avatar/avatar.svg' : blog.user.avatar }}">
          </image>
        </view>
        <view class="blog-user-info">
          <view class="blog-user-nickname">
            <text class="nickname">{{ blog.user.nickname }}</text>
            <image wx:if="{{ blog.user.isVerified }}" class="verify" src="../assets/svgs/person-v.svg">
            </image>
          </view>
          <text class="time-and-from">{{ blog.time + ' 来自' + blog.device }}</text>
        </view>
      </view>
      <!-- Blog Body -->
      <view class="blog-item-body">
        <text class="blog-item-body-content" selectable="true">{{ blog.text }}</text>
        <view class="blog-item-body-images" wx:if="{{ blog.images.length !== 0 }}">
          <image wx:for-item="image" wx:for="{{ blog.images }}" wx:for-index="i" wx:key="{{ i }}" catchtap="viewPic" src="{{ image }}" class="blog-item-body-image" mode="aspectFill" data-wpyviewpic-a="{{ image }}" data-wpyviewpic-b="{{ blog.images }}">
          </image>
        </view>
        <view class="blog-item-location" wx:if="{{ blog.location.locationName }}" catchtap="showLocation" data-wpyshowlocation-a="{{ blog.location.latitude }}" data-wpyshowlocation-b="{{ blog.location.longitude }}">
          <image class="location-icon" src="../assets/svgs/location.svg"/>
          <text>{{ blog.location.locationName }}</text>
        </view>
      </view>
      <!-- Blog Operations -->
      <view class="blog-item-operations" wx:if="{{ !isTest }}">
        <view catchtap="like" hover-class="blog-item-operation-like-scale" class="blog-item-operation-like" data-wpylike-a="">
          <image class="blog-item-operation-icon" src="{{ blog.like ? '../assets/svgs/like-fill.svg' : '../assets/svgs/like.svg' }}"/>
        </view>
        <view catchtap="comment" class="blog-item-operation-comment">
          <image class="blog-item-operation-icon" src="../assets/svgs/comment.svg"/>
        </view>
        <view catchtap="showMore" class="blog-item-operation-more" wx:if="{{ blog.user.isAdmin || blog.user.isAuthor }}" data-wpyshowmore-a="{{ idx }}" data-wpyshowmore-b="{{ blog.id }}">
          <image class="blog-item-operation-icon" src="../assets/svgs/more.svg"/>
        </view>
      </view>

    </view>

    <!-- comments -->
    <view class="comments"  wx:if="{{ !loading && !isTest }}">
      <view class="comments-tabs">
        <text class="comments-tabs-1">评论 {{ blog.commentNum ? blog.commentNum : '' }}</text>
        <text class="comments-tabs-2">点赞 {{ blog.likeNum ? blog.likeNum : '' }}</text>
      </view>
      <view class="comments-list">
        <view class="comments-item" wx:for="{{ blog.comments }}" wx:for-item="comment" wx:for-index="i" wx:key="{{ i }}" catchtap="showAction" data-wpyshowaction-a="{{ comment.nickname }}" data-wpyshowaction-b="{{ comment.openid }}" data-wpyshowaction-c="{{ comment.isAdmin }}" data-wpyshowaction-d="{{ comment.isAuthor }}" data-wpyshowaction-e="{{ comment.cid }}" data-wpyshowaction-f="{{ i }}">
          <view class="comment-user-info">
            <image src="{{ comment.avatar }}" class="comment-user-avatar"/>
          </view>
          <view class="comment-info">
            <text class="comment-nickname">{{ comment.nickname }}</text>
            <text class="comment-content">{{ comment.content }}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- comment -->
    <view class="comment" wx:if="{{ !loading }}">
      <input class="comment-input" type="text" placeholder="{{ placeholder }}" bindinput="inputChange" bindfocus="inputFocus" bindblur="inputBlur" bindconfirm="inputConfirm" focus="{{ focusComment }}" value="{{ inputContent }}" confirm-type="send" cursor-spacing="42"/>
      <image class="send-btn" wx:if="{{ !disable }}" catchtap="send" src="../assets/svgs/send-fill.svg">
      </image>
      <view class="isanonymous" wx:if="{{ focusComment || !disable }}">
        <view class="isanonymous-btn {{ isAnonymous ? 'anonymous' : 'named' }}" catchtap="anonymousChange">
          <text class="anonymous-text">匿名</text>
          <text class="named-text">实名</text>
          <view class="isanonymous-btn-key"/>
        </view>
      </view>
    </view>
  </view>